<!doctype html><html><head><title>Grub</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_42x0_resize_box_2.png><link rel=stylesheet href=/css/style.css><meta name=description content="Grub"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','G-0EF8BRBSL1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_42x0_resize_box_2.png alt=Logo>Henzel Moras</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_42x0_resize_box_2.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_42x0_resize_box_2.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=https://henzelmoras.github.io/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/linux-sys-admin/>Linux Sys Admin</a><ul class=active><li><a href=/posts/linux-sys-admin/lab-setup/>Lab Setup</a></li><li><a href=/posts/linux-sys-admin/linux-virtual-filesystem/>Linux Virtual Filesystem</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/linux-sys-admin/basic-storage-management/>Basic Storage Partition</a><ul><li><a href=/posts/linux-sys-admin/basic-storage-management/why-disk-partition/>Why Disk Partition ?</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/storage-overview/>Storage Overview</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/disk-types/>Disk Types</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/interacting-with-disks/>Interacting With Disks</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/disk-partition/>Disk Partition</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/backup-partition/>Backup Partition</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/file-as-disk/>File As Disk</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/linux-sys-admin/advanced-storage-managment/>Advanced Storage Partition</a><ul><li><a href=/posts/linux-sys-admin/advanced-storage-managment/logical-volume-manager/>LVM</a></li><li><a href=/posts/linux-sys-admin/advanced-storage-managment/raid/>RAID</a></li><li><a href=/posts/linux-sys-admin/advanced-storage-managment/swap/>swap</a></li><li><a href=/posts/linux-sys-admin/advanced-storage-managment/quotas/>Quotas</a></li><li><a href=/posts/linux-sys-admin/advanced-storage-managment/encryption/>Encryption</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/linux-sys-admin/operation-of-running-systems/>Operation of Running Systems</a><ul class=active><li><a href=/posts/linux-sys-admin/operation-of-running-systems/boot-process/>Boot Process</a></li><li><a class=active href=/posts/linux-sys-admin/operation-of-running-systems/grub/>Grub</a></li><li><a href=/posts/linux-sys-admin/operation-of-running-systems/kernel/>Kernel</a></li></ul></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://henzelmoras.github.io/posts/linux-sys-admin/operation-of-running-systems/grub/images/grub.png)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/site/default-avatar.png alt="Author Image"><h5 class=author-name>Henzel Moras</h5><p>April 23, 2021</p></div><div class=title><h1>Grub</h1></div><div class=post-content id=post-content><h3 id=about>About</h3><p>Virtually, all x86-based Linux systems (outside the embedded sphere) today use GRUB (GRand Unified Bootloader) to handle the early phases of system startup. Other platforms may have other equivalents, such as ELILO used on EFI systems such as IA64 (Itanium), and Das U-BOOT used on many embedded configurations.</p><p>Some important features of GRUB are:</p><ul><li>Alternative operating systems can be chosen at boot time.</li><li>Alternative kernels and/or initial ramdisks can be chosen at boot time for a given operating system.</li><li>Boot parameters can be easily changed at boot time without having to edit configuration files, etc., in advance.</li></ul><p>Version 2 has replaced Version 1 on all major Linux distributions except for a few</p><h3 id=versions>Versions</h3><p>While details are different between GRUB 2 and the legacy Version 1, they are fundamentally the same.</p><p>At boot, a basic configuration file is read, /boot/grub/grub.cfg, or /boot/grub2/grub.cfg, or /boot/efi/EFI/redhat/grub.cfg.</p><p>This file is auto-generated by update-grub (or grub2-mkconfig) based on configuration files in the /etc/grub.d directory and on /etc/default/grub and should not be edited by hand. Usually, these utilities are run from other distribution-supplied scripts used for updating or compiling Linux kernels.</p><h3 id=selection-edit-grub-during-boot>Selection, Edit Grub During Boot</h3><p>After the Post and BIOS stages the grub menu is displayed</p><p><img src=images/grub2.png alt=grub-menu></p><p>Using up and down arrows and the Enter key, you can select the right boot option, or can wait for a configurable time period before the default choice is entered.</p><p>However, you can do much more. After selecting an entry, you can type e for edit and then enter into an interactive shell. In this shell, you can alter the stanza in the configuration file that describes that particular boot option.</p><p>If there are serious problems, like not being able to find a configuration file, GRUB reverts back to this command line mode and you may be able to rescue the system without resorting to rescue media.</p><h3 id=installing-grub>Installing Grub</h3><p>if you do not install GRUB during system installation, or you need to re-install at some later point, the exact procedure for doing so depends on the GRUB version.</p><p>For Version 2, the installation procedure can be as easy as:</p><pre><code>[s0x45ker--_(+_+)_--SysAdmin ~]$ sudo grub2-install /dev/sda
</code></pre><p>Please read the man page carefully before running such a command; there are many options, and messing up GRUB can make your system un-bootable.</p><p>Note on EFI multi-boot systems, you may have to also run efibootmgr as things can be more complex. See the man page for more details.</p><p>In my case i had partitioned my SSD into partitons one was EFI(boot) and other was LVM(lvmroot, lvmswap, lvmhome).</p><h3 id=grub-configuration-files>GRUB Configuration Files</h3><p>etc/default/grub</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ cat /etc/default/grub 
GRUB_TIMEOUT<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>
GRUB_DISTRIBUTOR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>sed <span style=color:#e6db74>&#39;s, release .*$,,g&#39;</span> /etc/system-release<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
GRUB_DEFAULT<span style=color:#f92672>=</span>saved
GRUB_DISABLE_SUBMENU<span style=color:#f92672>=</span>true
GRUB_TERMINAL_OUTPUT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;console&#34;</span>
GRUB_CMDLINE_LINUX<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;crashkernel=auto resume=/dev/mapper/cl-swap rd.lvm.lv=cl/root rd.lvm.lv=cl/swap rhgb quiet&#34;</span>
GRUB_DISABLE_RECOVERY<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;true&#34;</span>
GRUB_ENABLE_BLSCFG<span style=color:#f92672>=</span>true
<span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ 
</code></pre></div><p>etc/grub.d</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ sudo ls -l /etc/grub.d
total <span style=color:#ae81ff>92</span>
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>8958</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 00_header
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>1043</span> Jun <span style=color:#ae81ff>15</span>  <span style=color:#ae81ff>2020</span> 00_tuned
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>232</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 01_users
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>832</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 08_fallback_counting
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>14088</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 10_linux
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>830</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 10_reset_boot_success
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>889</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 12_menu_auto_hide
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>11696</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 20_linux_xen
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>2559</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 20_ppc_terminfo
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>10670</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 30_os-prober
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>1412</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 30_uefi-firmware
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>214</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 40_custom
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>216</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> 41_custom
-rw-r--r--. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>483</span> Sep  <span style=color:#ae81ff>9</span>  <span style=color:#ae81ff>2020</span> README
<span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ 
</code></pre></div><p>It is possible to switch to the new scheme by running the grub2-switch-to-blscfg program. One can also turn the new method on and off by altering the the variable GRUB_ENABLE_BLSCFGS=[true|false].</p><p>Each of the two files (/etc/default/grub and /etc/grub.d) runs in ascending order when the configuration file is updated.</p><p>New file can be generated by grub2-mkconfig or grub-mkconfig.</p><h3 id=lets-take-an-example-of-using-the-grub>lets take an example of using the GRUB:</h3><p>press &lsquo;e&rsquo; while in grub before it enters default boot u should see something like this</p><p><img src=images/default.png alt=deafult></p><p>we will edit the line begining with linux press &lsquo;end&rsquo; button after moving to the begining of the line using arrow keys</p><p>remove &lsquo;quiet&rsquo;(system boot messages) &lsquo;rgb(GUI)&rsquo;</p><p>add 3 or text like this</p><p><img src=images/changes.png alt=changes></p><p>press Ctrl-x to start</p><p>boot messages will be displayed</p><p><img src=images/boot-messages.png alt=messages></p><p>and eventually u will enter sage mode</p><p><img src=images/sage-mode.png alt=sage-mode></p><p>to get back GUI</p><p>$ sudo systemctl start gdm</p><p>$ sudo systemctl start lightdm</p><p>$ sudo telinit 5</p><p>$ sudo service gdm restart</p><p>$ sudo service lightdm restart</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ sudo systemctl start gdm
</code></pre></div><p>will start the GUI login page</p><p><img src=images/login.png alt=login></p></div><div class=btn-improve-page><a href=https://github.com/HenzelMoras/HenzelMoras.github.io/edit/source/content/posts/linux-sys-admin/operation-of-running-systems/grub/index.md target=_blank><i class="fas fa-code-branch"></i>Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/search/ class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i>Prev</div><div class=next-prev-text>Search Results</div></a></div><div class="col-md-6 next-article"><a href=/posts/linux-sys-admin/operation-of-running-systems/kernel/ class="btn btn-outline-info"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Kernel</div></a></div></div><hr><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;var disqus_shortname="disqus_OJe4Jrufbb";dsq.src="//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#about>About</a></li><li><a href=#versions>Versions</a></li><li><a href=#selection-edit-grub-during-boot>Selection, Edit Grub During Boot</a></li><li><a href=#installing-grub>Installing Grub</a></li><li><a href=#grub-configuration-files>GRUB Configuration Files</a></li><li><a href=#lets-take-an-example-of-using-the-grub>lets take an example of using the GRUB:</a></li></ul></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=#accomplishments>Accomplishments</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>henzelmoras@gmail.com</span></li></ul></div><div class="col-md-4 col-sm-12"><p>Stay up to date with email notification</p><form><div class=form-group><input type=email class=form-control id=exampleInputEmail1 aria-describedby=emailHelp placeholder="Enter email">
<small id=emailHelp class="form-text text-muted">We'll never share your email with anyone else.</small></div><button type=submit class="btn btn-info">Submit</button></form></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=#home target=#><img src=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_32x0_resize_box_2.png>
Henzel Moras</a></div><div class="col-md-4 text-center">Â© 2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a>
<a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_2.png>
Toha</a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script><script type=text/javascript src=/js/popper.min.js></script><script type=text/javascript src=/js/bootstrap.min.js></script><script type=text/javascript src=/js/navbar.js></script><script type=text/javascript src=/js/plyr.js></script><script type=text/javascript src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>