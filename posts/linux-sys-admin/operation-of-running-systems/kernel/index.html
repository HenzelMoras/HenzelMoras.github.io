<!doctype html><html><head><title>Kernel</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_42x0_resize_box_2.png><meta property="og:title" content="Kernel"><meta property="og:description" content="About Linux is only the kernel of the operating system, which includes many other components, such as libraries and applications that interact with the kernel.
The kernel is the essential central component that connects the hardware to the software and manages system resources, such as memory and CPU time allocation among competing applications and services. It handles all connected devices using device drivers, and makes the devices available for operating system use."><meta property="og:type" content="article"><meta property="og:url" content="https://henzelmoras.github.io/posts/linux-sys-admin/operation-of-running-systems/kernel/"><meta property="article:published_time" content="2021-04-23T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-23T00:00:00+00:00"><meta name=description content="Kernel"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','G-0EF8BRBSL1','auto');ga('send','pageview');}</script></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_42x0_resize_box_2.png alt=Logo>
Henzel Moras</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_42x0_resize_box_2.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_42x0_resize_box_2.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/linux-sys-admin/>Linux Sys Admin</a><ul class=active><li><a href=/posts/linux-sys-admin/lab-setup/ title="Lab Setup">Lab Setup</a></li><li><a href=/posts/linux-sys-admin/linux-virtual-filesystem/ title="Linux Virtual Filesystem">Linux Virtual Filesystem</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/linux-sys-admin/basic-storage-management/>Basic Storage Partition</a><ul><li><a href=/posts/linux-sys-admin/basic-storage-management/why-disk-partition/ title="Why Disk Partition ?">Why Disk Partition ?</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/storage-overview/ title="Storage Overview">Storage Overview</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/disk-types/ title="Disk Types">Disk Types</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/interacting-with-disks/ title="Interacting With Disks">Interacting With Disks</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/disk-partition/ title="Disk Partition">Disk Partition</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/backup-partition/ title="Backup Partition">Backup Partition</a></li><li><a href=/posts/linux-sys-admin/basic-storage-management/file-as-disk/ title="File As Disk">File As Disk</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/linux-sys-admin/advanced-storage-managment/>Advanced Storage Partition</a><ul><li><a href=/posts/linux-sys-admin/advanced-storage-managment/logical-volume-manager/ title=LVM>LVM</a></li><li><a href=/posts/linux-sys-admin/advanced-storage-managment/raid/ title=RAID>RAID</a></li><li><a href=/posts/linux-sys-admin/advanced-storage-managment/swap/ title=swap>swap</a></li><li><a href=/posts/linux-sys-admin/advanced-storage-managment/quotas/ title=Quotas>Quotas</a></li><li><a href=/posts/linux-sys-admin/advanced-storage-managment/encryption/ title=Encryption>Encryption</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/linux-sys-admin/operation-of-running-systems/>Operation of Running Systems</a><ul class=active><li><a href=/posts/linux-sys-admin/operation-of-running-systems/boot-process/ title="Boot Process">Boot Process</a></li><li><a href=/posts/linux-sys-admin/operation-of-running-systems/grub/ title=Grub>Grub</a></li><li><a class=active href=/posts/linux-sys-admin/operation-of-running-systems/kernel/ title=Kernel>Kernel</a></li></ul></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://henzelmoras.github.io/posts/linux-sys-admin/operation-of-running-systems/kernel/images/random.png)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/site/default-avatar_hu65b9e34f1adebe9b4bec57596ad2e1bf_347794_120x120_fit_box_2.png alt="Author Image"><h5 class=author-name>Henzel Moras</h5><p>April 23, 2021</p></div><div class=title><h1>Kernel</h1></div><div class=post-content id=post-content><h3 id=about>About</h3><p>Linux is only the kernel of the operating system, which includes many other components, such as libraries and applications that interact with the kernel.</p><p>The kernel is the essential central component that connects the hardware to the software and manages system resources, such as memory and CPU time allocation among competing applications and services. It handles all connected devices using device drivers, and makes the devices available for operating system use.</p><p>A system running only a kernel has rather limited functionality. It will be found only in dedicated and focused embedded devices.</p><p>The main responsibilities of the kernel include:</p><ul><li>System initialization and boot up</li><li>Process scheduling</li><li>Memory management</li><li>Controlling access to hardware</li><li>I/O (Input/Output) between applications and storage devices</li><li>Implementation of local and network filesystems</li><li>Security control, both locally (such as filesystem permissions) and over the network</li><li>Networking control.</li></ul><h3 id=kernel-boot-parameters>Kernel Boot Parameters</h3><p><img src=images/default.png alt=default></p><p>Below you can see an explanation of some of the boot parameters, some of which we have displayed previously:</p><ul><li>root: root filesystem</li><li>ro: mounts root device read-only on boot</li><li>vconsole.keymap: which keyboard to use on the console</li><li>crashkernel: how much memory to set aside for kernel crashdumps</li><li>vconsole.font: which font to use on the console</li><li>rhgb: for graphical boot</li><li>quiet: disables most log messages.</li><li>LANG: is the system language.</li></ul><p>By convention, there should be no intentionally hidden or secret parameters. They should all be explained in the documentation and patches to the kernel source with new parameters should always include patches to the documentation file.</p><p>The sysctl interface can be used to read and tune kernel parameters at run time:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ sudo sysctl -a | less
abi.vsyscall32 <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
crypto.fips_enabled <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
debug.exception-trace <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
debug.kprobes-optimization <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
dev.cdrom.autoclose <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
dev.cdrom.autoeject <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
dev.cdrom.check_media <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
dev.cdrom.debug <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
dev.cdrom.info <span style=color:#f92672>=</span> CD-ROM information, Id: cdrom.c 3.20 2003/12/17
dev.cdrom.info <span style=color:#f92672>=</span> 
dev.cdrom.info <span style=color:#f92672>=</span> drive name:            sr1     sr0
dev.cdrom.info <span style=color:#f92672>=</span> drive speed:           <span style=color:#ae81ff>32</span>      <span style=color:#ae81ff>32</span>
dev.cdrom.info <span style=color:#f92672>=</span> drive <span style=color:#75715e># of slots:      1       1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can close tray:                <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can open tray:         <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can lock tray:         <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can change speed:      <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can <span style=color:#66d9ef>select</span> disk:       <span style=color:#ae81ff>0</span>       <span style=color:#ae81ff>0</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can read multisession: <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can read MCN:          <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Reports media changed: <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can play audio:                <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can write CD-R:                <span style=color:#ae81ff>0</span>       <span style=color:#ae81ff>0</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can write CD-RW:       <span style=color:#ae81ff>0</span>       <span style=color:#ae81ff>0</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can read DVD:          <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>1</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can write DVD-R:       <span style=color:#ae81ff>0</span>       <span style=color:#ae81ff>0</span>
dev.cdrom.info <span style=color:#f92672>=</span> Can write DVD-RAM:     <span style=color:#ae81ff>0</span>       <span style=color:#ae81ff>0</span>
:
</code></pre></div><h3 id=kernel-packages>Kernel Packages</h3><p>Table lists and describes the core and some add-on kernel packages.</p><table><thead><tr><th>Kernel Package</th><th>Description</th></tr></thead><tbody><tr><td>kernel</td><td>Contains no files, but ensures other kernel packages are accurately installed</td></tr><tr><td>kernel-core</td><td>Includes a minimal number of modules to provide core functionality</td></tr><tr><td>kernel-devel</td><td>Includes support for building kernel modules</td></tr><tr><td>kernel-modules</td><td>Contains modules for common hardware devices</td></tr><tr><td>kernel-modules-extra</td><td>Contains modules for not-so-comon hardware devices</td></tr><tr><td>kernel-headers</td><td>Includes files to support the interface between the kernel and userspace libraries and programs</td></tr><tr><td>kernel-tools</td><td>Includes tools to manipulate the kernel</td></tr><tr><td>kernel-tools-libs</td><td>Includes the libraries to support the kernel tools</td></tr></tbody></table><h3 id=understanding-kernel-directory-structure>Understanding Kernel Directory Structure</h3><p>Kernel and its support files are stored at different locations in the directory hierarchy, of which three locations /boot, /proc, and usr/lib/modules are noteworthy.</p><h3 id=the-boot-location>The /boot location</h3><p>/boot is essentially a file system that is created at system installation. it houses the Linux kernel, GRUB(v?) config, and other kernel and boot support files.</p><p>listing.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ ls -l /boot
total <span style=color:#ae81ff>283888</span>
-rw-r--r--. <span style=color:#ae81ff>1</span> root root    <span style=color:#ae81ff>189466</span> Apr  <span style=color:#ae81ff>9</span> 00:39 config-4.18.0-240.22.1.el8_3.x86_64
-rw-r--r--. <span style=color:#ae81ff>1</span> root root    <span style=color:#ae81ff>189494</span> Sep <span style=color:#ae81ff>26</span>  <span style=color:#ae81ff>2020</span> config-4.18.0-240.el8.x86_64
drwxr-xr-x. <span style=color:#ae81ff>3</span> root root        <span style=color:#ae81ff>17</span> Apr <span style=color:#ae81ff>22</span> 02:25 efi
drwx------. <span style=color:#ae81ff>4</span> root root        <span style=color:#ae81ff>83</span> Apr <span style=color:#ae81ff>23</span> 19:44 grub2
-rw-------. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>105461933</span> Apr <span style=color:#ae81ff>22</span> 02:31 initramfs-0-rescue-b20442256ef84cd0b34bdb7cc26027a8.img
-rw-------. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>53609260</span> Apr <span style=color:#ae81ff>22</span> 03:37 initramfs-4.18.0-240.22.1.el8_3.x86_64.img
-rw-------. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>19515350</span> Apr <span style=color:#ae81ff>22</span> 03:22 initramfs-4.18.0-240.22.1.el8_3.x86_64kdump.img
-rw-------. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>55612085</span> Apr <span style=color:#ae81ff>22</span> 02:34 initramfs-4.18.0-240.el8.x86_64.img
-rw-------. <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>19515551</span> Apr <span style=color:#ae81ff>22</span> 02:35 initramfs-4.18.0-240.el8.x86_64kdump.img
drwxr-xr-x. <span style=color:#ae81ff>3</span> root root        <span style=color:#ae81ff>21</span> Apr <span style=color:#ae81ff>22</span> 02:29 loader
-rw-------. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>4034919</span> Apr  <span style=color:#ae81ff>9</span> 00:39 System.map-4.18.0-240.22.1.el8_3.x86_64
-rw-------. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>4032815</span> Sep <span style=color:#ae81ff>26</span>  <span style=color:#ae81ff>2020</span> System.map-4.18.0-240.el8.x86_64
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>9514120</span> Apr <span style=color:#ae81ff>22</span> 02:30 vmlinuz-0-rescue-b20442256ef84cd0b34bdb7cc26027a8
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>9485448</span> Apr  <span style=color:#ae81ff>9</span> 00:39 vmlinuz-4.18.0-240.22.1.el8_3.x86_64
-rwxr-xr-x. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>9514120</span> Sep <span style=color:#ae81ff>26</span>  <span style=color:#ae81ff>2020</span> vmlinuz-4.18.0-240.el8.x86_64
<span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ 
</code></pre></div><p>the <em>vmlinuz</em> is the main kernel file with <em>initramfs</em> , <em>config</em> and <em>System.map</em> storing the main kernel&rsquo;s boot image, configuration and mapping respectively.</p><p>The files for rescue version have the string &ldquo;rescue&rdquo; embedded in their names, as indicated in the above output.</p><p>The efi and grub2 are subdirectories under the /boot
its listing as such:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ sudo ls -l /boot/grub2/
total <span style=color:#ae81ff>28</span>
-rw-r--r--. <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>64</span> Apr <span style=color:#ae81ff>22</span> 02:33 device.map
drwxr-xr-x. <span style=color:#ae81ff>2</span> root root   <span style=color:#ae81ff>25</span> Apr <span style=color:#ae81ff>22</span> 02:33 fonts
-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>6583</span> Apr <span style=color:#ae81ff>22</span> 02:33 grub.cfg
-rw-------. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>1024</span> Apr <span style=color:#ae81ff>23</span> 19:44 grubenv
drwxr-xr-x. <span style=color:#ae81ff>2</span> root root <span style=color:#ae81ff>8192</span> Apr <span style=color:#ae81ff>22</span> 02:33 i386-pc
<span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ 
</code></pre></div><p>info regarding config for running and rescue kernels exists within</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ sudo ls -l /boot/loader/entries/
total <span style=color:#ae81ff>12</span>
-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>389</span> Apr <span style=color:#ae81ff>22</span> 02:31 b20442256ef84cd0b34bdb7cc26027a8-0-rescue.conf
-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>351</span> Apr <span style=color:#ae81ff>22</span> 03:17 b20442256ef84cd0b34bdb7cc26027a8-4.18.0-240.22.1.el8_3.x86_64.conf
-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>317</span> Apr <span style=color:#ae81ff>22</span> 02:31 b20442256ef84cd0b34bdb7cc26027a8-4.18.0-240.el8.x86_64.conf
</code></pre></div><h3 id=the-usrlibmodules-location>The /usr/lib/modules Location</h3><p>list of info about packages within the system</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ sudo ls -l /usr/lib/modules
total <span style=color:#ae81ff>8</span>
drwxr-xr-x. <span style=color:#ae81ff>3</span> root root   <span style=color:#ae81ff>19</span> Apr <span style=color:#ae81ff>22</span> 02:26 4.18.0-187.el8.x86_64
drwxr-xr-x. <span style=color:#ae81ff>7</span> root root <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>23</span> 19:41 4.18.0-240.22.1.el8_3.x86_64
drwxr-xr-x. <span style=color:#ae81ff>6</span> root root <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>22</span> 02:57 4.18.0-240.el8.x86_64
<span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ 
</code></pre></div><p>select the kernel being used</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ sudo ls -l /usr/lib/modules/4.18.0-240.el8.x86_64/
bls.conf             modules.builtin      modules.networking   System.map
build                modules.builtin.bin  modules.order        updates/
config               modules.dep          modules.softdep      vdso/
kernel/              modules.dep.bin      modules.symbols      vmlinuz
modules.alias        modules.devname      modules.symbols.bin  .vmlinuz.hmac
modules.alias.bin    modules.drm          source               weak-updates/
modules.block        modules.modesetting  symvers.gz           
<span style=color:#f92672>[</span>s0x45ker--_<span style=color:#f92672>(</span>+_+<span style=color:#f92672>)</span>_--SysAdmin ~<span style=color:#f92672>]</span>$ sudo ls -l /usr/lib/modules/4.18.0-240.el8.x86_64/kernel/drivers/
acpi/       dax/        hwmon/      media/      nvme/       pwm/        uwb/
ata/        dca/        hwtracing/  memstick/   parport/    remoteproc/ vdpa/
bcma/       dma/        i2c/        message/    pci/        rtc/        vfio/
block/      edac/       iio/        mfd/        pcmcia/     scsi/       vhost/
bluetooth/  firewire/   infiniband/ misc/       pinctrl/    spi/        video/
cdrom/      firmware/   input/      mmc/        platform/   target/     virtio/
char/       gpio/       iommu/      mtd/        power/      thermal/    watchdog/
cpufreq/    gpu/        isdn/       net/        powercap/   tty/        xen/
cpuidle/    hid/        leds/       ntb/        pps/        uio/        
crypto/     hv/         md/         nvdimm/     ptp/        usb/        
</code></pre></div><p>There are a number of utility programs that are used with kernel modules:</p><details><summary><b>lsmod</b></summary><p>List loaded modules.<pre><code>[s0x45ker--_(+_+)_--SysAdmin ~]$ lsmod
Module                  Size  Used by
binfmt_misc            20480  1
nls_utf8               16384  2
isofs                  45056  2
uinput                 20480  0
vboxvideo              45056  0
xt_CHECKSUM            16384  1
ipt_MASQUERADE         16384  3
xt_conntrack           16384  1
ipt_REJECT             16384  2
nf_nat_tftp            16384  0
nft_objref             16384  1
nf_conntrack_tftp      16384  3 nf_nat_tftp
nft_counter            16384  33
tun                    53248  1
bridge                192512  0
stp                    16384  1 bridge
llc                    16384  2 bridge,stp
nft_fib_inet           16384  1
nft_fib_ipv4           16384  1 nft_fib_inet
nft_fib_ipv6           16384  1 nft_fib_inet
nft_fib                16384  3 nft_fib_ipv6,nft_fib_ipv4,nft_fib_inet
nft_reject_inet        16384  5
nf_reject_ipv4         16384  2 nft_reject_inet,ipt_REJECT
nf_reject_ipv6         16384  1 nft_reject_inet
nft_reject             16384  1 nft_reject_inet
nft_ct                 20480  18
nf_tables_set          49152  20
nft_chain_nat          16384  12
nf_nat                 45056  3 ipt_MASQUERADE,nf_nat_tftp,nft_chain_nat
nf_conntrack          172032  6 xt_conntrack,nf_nat,nf_conntrack_tftp,nft_ct,ipt_MASQUERADE,nf_nat_tftp
nf_defrag_ipv6         20480  1 nf_conntrack
nf_defrag_ipv4         16384  1 nf_conntrack
ip6_tables             32768  0
nft_compat             20480  16
ip_set                 49152  0
nf_tables             167936  420 nft_ct,nft_compat,nft_reject_inet,nft_fib_ipv6,nft_objref,nft_fib_ipv4,nft_counter,nft_chain_nat,nf_tables_set,nft_reject,nft_fib,nft_fib_inet
nfnetlink              16384  4 nft_compat,nf_tables,ip_set
sunrpc                479232  1
intel_rapl_msr         16384  0
intel_rapl_common      24576  1 intel_rapl_msr
intel_pmc_core_pltdrv    16384  0
intel_pmc_core         28672  0
intel_powerclamp       16384  0
crct10dif_pclmul       16384  1
snd_intel8x0           45056  7
crc32_pclmul           16384  0
snd_ac97_codec        143360  1 snd_intel8x0
ac97_bus               16384  1 snd_ac97_codec
snd_seq                81920  0
snd_seq_device         16384  1 snd_seq
ghash_clmulni_intel    16384  0
snd_pcm               118784  2 snd_intel8x0,snd_ac97_codec
intel_rapl_perf        20480  0
pcspkr                 16384  0
snd_timer              40960  2 snd_seq,snd_pcm
joydev                 24576  0
snd                    94208  20 snd_seq,snd_seq_device,snd_intel8x0,snd_timer,snd_ac97_codec,snd_pcm
soundcore              16384  1 snd
i2c_piix4              24576  0
video                  49152  0
ip_tables              28672  0
xfs                  1511424  2
libcrc32c              16384  3 nf_conntrack,nf_nat,xfs
sd_mod                 53248  3
sr_mod                 28672  2
cdrom                  65536  1 sr_mod
sg                     40960  0
ata_generic            16384  0
vmwgfx                364544  4
drm_kms_helper        217088  2 vmwgfx,vboxvideo
syscopyarea            16384  1 drm_kms_helper
sysfillrect            16384  1 drm_kms_helper
sysimgblt              16384  1 drm_kms_helper
fb_sys_fops            16384  1 drm_kms_helper
ttm                   110592  2 vmwgfx,vboxvideo
drm                   557056  8 vmwgfx,drm_kms_helper,vboxvideo,ttm
ahci                   40960  2
ata_piix               36864  2
libahci                40960  1 ahci
crc32c_intel           24576  1
serio_raw              16384  0
vboxguest             385024  6
e1000                 151552  0
libata                270336  4 ata_piix,libahci,ahci,ata_generic
dm_mirror              28672  0
dm_region_hash         20480  1 dm_mirror
dm_log                 20480  2 dm_region_hash,dm_mirror
dm_mod                151552  8 dm_log,dm_mirror
fuse                  131072  3
</code></pre></p></details><details><summary><b>insmod</b></summary><p>Directly load modules.<pre><code>[s0x45ker--_(+_+)_--SysAdmin ~]$ sudo insmod /usr/lib/modules/4.18.0-240.22.1.el8_3.x86_64/kernel/net/ipv4/netfilter/ip_tables.ko.xz
insmod: ERROR: could not insert module /usr/lib/modules/4.18.0-240.22.1.el8_3.x86_64/kernel/net/ipv4/netfilter/ip_tables.ko.xz: File exists    
</code></pre></p></details><details><summary><b>rmmod</b></summary><p>Directly remove modules.<pre><code>[s0x45ker--_(+_+)_--SysAdmin ~]$ lsmod | grep ip_tables
ip_tables              28672  0
[s0x45ker--_(+_+)_--SysAdmin ~]$ sudo rmmod ip_tables
[s0x45ker--_(+_+)_--SysAdmin ~]$ lsmod | grep ip_tables
</code></pre></p></details><details><summary><b>modprobe</b></summary><p>Load or unload modules, using a pre-built module database with dependency and location information.<pre><code>[s0x45ker--_(+_+)_--SysAdmin ~]$ sudo modprobe ip_tables
[s0x45ker--_(+_+)_--SysAdmin ~]$ lsmod | grep ip_tables
ip_tables              28672  0

[s0x45ker--_(+_+)_--SysAdmin ~]$ sudo modprobe -r ip_tables
[s0x45ker--_(+_+)_--SysAdmin ~]$ lsmod | grep ip_tables
[s0x45ker--_(+_+)_--SysAdmin ~]$ 
</code></pre></p></details><details><summary><b>depmod</b></summary><p>Rebuild the module dependency database.<pre><code>[s0x45ker--_(+_+)_--SysAdmin ~]$ sudo depmod 
[s0x45ker--_(+_+)_--SysAdmin ~]$
</code></pre></p></details><details><summary><b>modinfo</b></summary><p>Display information about a module.<pre><code>[s0x45ker--_(+_+)_--SysAdmin ~]$ sudo modinfo ip_tables
filename:       /lib/modules/4.18.0-240.22.1.el8_3.x86_64/kernel/net/ipv4/netfilter/ip_tables.ko.xz
alias:          ipt_icmp
description:    IPv4 packet filter
author:         Netfilter Core Team &lt;coreteam@netfilter.org&gt;
license:        GPL
rhelversion:    8.3
srcversion:     18BB21BB7835F901AA8B42A
depends:        
intree:         Y
name:           ip_tables
vermagic:       4.18.0-240.22.1.el8_3.x86_64 SMP mod_unload modversions 
sig_id:         PKCS#7
signer:         CentOS kernel signing key
sig_key:        78:2B:A1:1C:2F:DE:D4:A5:85:15:10:61:C8:2E:D9:98:9C:D7:4D:14
sig_hashalgo:   sha256
signature:      57:8B:BC:89:CF:88:DB:AB:33:58:1A:AF:B3:2E:0F:93:E5:E7:8C:A9:
                08:09:4B:D9:0F:88:64:AA:3D:EF:2C:28:83:CF:5E:21:3E:81:66:DC:
                21:A9:94:8D:90:D2:D9:92:00:9A:E0:DB:E0:5E:FA:B8:0A:FB:B2:05:
                67:5A:43:EA:B3:61:AC:8E:5E:F1:38:71:E6:21:2C:FA:6E:31:CA:00:
                C3:61:C0:00:10:A7:CF:BF:B9:B6:5B:2B:EE:25:90:08:6F:CD:0B:0C:
                89:4F:8C:38:4C:39:1A:4F:BA:D1:7F:61:66:AC:7B:91:41:91:78:C8:
                22:EA:9F:BF:C2:A8:71:0D:A0:85:A2:90:29:82:9F:AB:AE:23:5F:95:
                0C:5E:60:73:9D:4A:6E:DA:DF:BA:89:01:9C:8E:4D:4D:5C:41:3D:88:
                44:3D:79:3A:EC:1E:A9:52:BB:F1:4A:6B:C8:DB:DE:70:67:7C:00:CD:
                88:6A:A4:B9:DB:AB:C7:83:EA:BA:EF:B8:F1:30:FD:53:3A:3D:EB:EE:
                A1:0F:08:14:C8:0D:EE:6E:32:9B:3D:0C:24:2A:69:E7:64:61:60:6F:
                0E:57:54:CB:93:A8:86:CF:53:92:74:23:EE:87:01:34:4F:77:62:E6:
                D3:8F:E8:E7:37:18:ED:45:FC:C6:48:95:1A:DF:A3:72:94:E4:0D:7C:
                00:E2:40:D9:5A:45:CE:7A:CE:01:03:C2:F2:AE:35:FB:F0:EC:5F:41:
                73:94:CF:F2:64:16:FF:79:76:65:13:42:4C:91:3B:5A:C4:C3:D3:E5:
                6F:74:80:93:17:E5:D5:65:A5:22:87:07:40:DA:B9:F4:81:C7:BC:AF:
                49:B2:5D:62:CD:42:52:E3:CC:0E:D6:95:26:B4:7C:FD:A5:CB:B2:9E:
                7C:07:38:F7:9C:86:D8:F9:90:FB:5A:7E:03:DB:3F:6E:15:64:70:84:
                28:47:E5:6F:FE:A7:8F:DB:8D:18:97:13:62:38:8C:C1:ED:14:15:81:
                D4:53:7A:77 
</code></pre></p></details><p>There are some important things to keep in mind when loading and unloading modules:</p><ul><li>It is impossible to unload a module being used by one or more other modules, which one can ascertain from the lsmod listing.</li><li>It is impossible to unload a module that is being used by one or more processes, which can also be seen from the lsmod listing. However, there are modules which do not keep track of this reference count, such as network device driver modules, as it would make it too difficult to temporarily replace a module without shutting down and restarting much of the whole network stack.</li><li>When a module is loaded with modprobe, the system will automatically load any other modules that need to be loaded first.</li><li>When a module is unloaded with modprobe -r, the system will automatically unload any other modules being used by the module, if they are not being simultaneously used by any other loaded modules.</li></ul></div><div class=btn-improve-page><a href=https://github.com/HenzelMoras/HenzelMoras.github.io/edit/source/content/posts/linux-sys-admin/operation-of-running-systems/kernel/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>Improve this page</a></div><hr><div class="row next-prev-navigator"></div><hr><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;var disqus_shortname="henzelmoras-github-io";dsq.src="//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#about>About</a></li><li><a href=#kernel-boot-parameters>Kernel Boot Parameters</a></li><li><a href=#kernel-packages>Kernel Packages</a></li><li><a href=#understanding-kernel-directory-structure>Understanding Kernel Directory Structure</a></li><li><a href=#the-boot-location>The /boot location</a></li><li><a href=#the-usrlibmodules-location>The /usr/lib/modules Location</a></li></ul></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=#accomplishments>Accomplishments</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=#achievements>Achievements</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>henzelmoras@gmail.com</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=#home target=#><img src=/images/site/logo_hu46080cd0c725e203453795b794b5609d_25299_32x0_resize_box_2.png>
Henzel Moras</a></div><div class="col-md-4 text-center">© 2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a>
<a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_2.png>
Toha</a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script><script type=text/javascript src=/js/popper.min.js></script><script type=text/javascript src=/js/bootstrap.min.js></script><script type=text/javascript src=/js/navbar.js></script><script type=text/javascript src=/js/plyr.js></script><script type=text/javascript src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>